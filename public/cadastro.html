<!DOCTYPE html>
<html lang="pt">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" href="assets/css/cadastro.css">
    <link rel="shortcut icon" href="assets/img/icone.png" type="image/x-icon">
    <title>Cadastro</title>
</head>

<body>
    <div class="header">
        <div class="header-logo">
            <a href="index.html">
                <img class="header-logo-img"
                    src="assets/img/nier-automata-ps4-games-playstation-nier-automata-logo-transparent-440_220.jpg">
            </a>
        </div>
    </div>
    <main>
        <div class="cadastro">
            <div class="yorha">
                <img src="assets/img/yorha-black-bg.png" alt="YoRHa">
            </div>
            <div class="box_cadastro">
                <form id="form_cadastro" method="post" onsubmit="return cadastrar()">
                    Nome de Usuario
                    <input id="inp_usuario" type="text" name="nome" autofocus required minlength="4" maxlength="15">


                    Email
                    <input type="email" name="email" required minlength="4" maxlength="100">


                    Senha
                    <input id="inp_senha" type="password" name="senha" required minlength="6" maxlength="20">


                    Confirmar senha
                    <input id="inp_confirm" type="password" minlength="6" required  maxlength="20">


                    <button type="submit">Cadastrar</button>
                </form>
            </div>
            <div class="redirecionar_login"><a href="login.html">Já é cadastrado?</a></div>
        </div>
    </main>
    <footer></footer>
</body>

</html>
<script>

    function cadastrar() {
        if (inp_senha.value == inp_confirm.value) {

            var formulario = new URLSearchParams(new FormData(form_cadastro));
            fetch("/usuarios/cadastrar", {
                method: "POST",
                body: formulario
            }).then(function (response) {

                if (response.ok) {

                    window.location.href = 'login.html';

                } else {

                    console.log('Erro de cadastro!');
                    alert('Erro de cadastro!');

                }
            });

            return false;

        } else {
            alert('Falha na confirmação de senha');
            return false;
        }
    }


</script>